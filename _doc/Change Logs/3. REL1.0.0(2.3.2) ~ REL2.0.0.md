# CHANGELOG HISTORY REL1.0.0(2.3.2) ~ REL2.0.0

## REL2.0.0 - 2024-12-21

### Changes in features

#### Renamed optional features
* `markdown:markedExtras` renamed to `generator/allow-custom-marked-extension`.
* `markdown:noHeaderId` renamed to `generator/markdown-no-header-id`.
* `fewu/path/noSuffix` renamed to `path/no-md-suffix`.

#### New (functions in) optional features
* `generator/allow-custom-marked-extension` : Specific tricks for some marked extensions that does not follow the common usage. (like `marked-admonition-extension`)
* `generator/leave-no-h1` : Do not automatically add heading to posts.
* `generator/copy-next-image` : Get images referenced in post and put it into generated folder. (Only works with images next to post.md)

#### Removed optional features
* Remove feature `markdown:foreword/nullOnDefault`.
* Remove feature `markdown:foreword/warn`.
* Remove feature `fewu:path/autoRoot`, it's now a built-in fallback when `general.site-relative-root` is not configured (We recommend auto-configure, chich needs to fill `website.url` with website url (like `0xarch.github.io`)).

### Changes in interaction
The main entrance has rebuilt to be more flexible
* Rebuild `fewu --new` with human-friendly argument parser.
* Rebuild `fewu --init`.

### Utilities

#### New utilities
* `Argv`: Provides parsed program arguments. Replacing `gopt` in `#core/run`.
* `Console`: Replaces `info,info.red,warn` in `#core/run`
* `Markdown`: Provides a simple interface to interact with marked (or other parser may be added).
* `NewPromise`: Add some Promise features that are not supported in Node.js 20.
* `Text`: Replaces `#core/text_process`.
* `TemplateString`: Replaces `#core/gstring`. (Formerly `GString`, but with some tweaks)
* `GObject`: Moved out of `core`.
* `I18n`: Abstracted i18n utility.

### Code
* New `AbstractPost` class, which stores type declarations. (Do not use TypeScript)
* New `AbstractExposedApi` class.
* New `PostIdentifier` class, which replaces `Container` class.
* New `PostIdentifierCollection` class.
* Rebuild `Database`.
* Rebuild `Post`.
* `#core/builder` now uses `fs/promises`.
* use `${name}.html` instead of `${name}/index.html` for posts.
* Built-in module `search` now use formatted log.
* Fixed a bug that all files under post directory are recognized as a post file.

### Critical changes
* The old `database` or `db` API has been removed. Compatibility of `db.config` will be kept until 2.1.0.
* Use `split` `foreach` instead of `cycling` `varias` in working (as `cycling` and `varias` are hard to understand)
>> NOTE that `foreach` will be `each` in page template.
>> THIS IS UNSTABLE CHANGE.

## REL1.2.5 - 2024-11-18

### New
* Optional Features:
    * `fewu:path/local/noSuffix` : Fewu removes suffix in generated directries.
    * `markdown:markedExtras` : Allow user to dynamically load marked extensions module to fit their posts.

### Changed
* Rebuild search module.

### Fixed
* `fewu:path/flat` generates wrong path.

## REL1.2.4 - 2024-06-20

### New
* Optional Features:
    * `fewu:path/url/autoRoot` : Fewu automatically detects website root for file references.
    * `markdown:HTMLMinifier` : Fewu uses HTMLMinifier to reduce generated file size. (default before, manual now)
    * `markdown:noHeaderId` : Fewu will disable header id generation. (default before, manual now)
* Preature _Database_ API `db.$<>`
* Util `dynamicImport`

### Removed
* Deprecated API on _class_ `Post` : `Post<>.paths`.

### Changed
* Feature `fewu:path/flat` (before: `flatPath` ) now do: Flatten `read/yyyy/mm/dd/POST_NAME.md` to `read:yyyy-mm-dd:POST_NAME.md`.
* Builder will now ignore fail builds and log failure in console. (Behavior before: `throw` and STOP ).
* Section `site_url` in _Config_ moved to `website.URL` or `website.url`.

### Fixed
* Fixed incorrect file mode of most files (755 -> 644).
* Fixed some bugs in builtin modules

## REL1.2.3 - 2024-06-03

### New
* Easier construction for `FuzzyDate`.
* new "enabledFeatures[]" section in configuration, this will collect some separate config keys.
* flatPath is now a `Feature`, which need to enable manually. [**This has been removed since 1.2.4**]

### Fixed
* Fixed multi posts in one tag/category.
* Fixed unsorted posts in tag/category.

### Removed
* Removed `descriptive_class` , split `Tag` ... to separate files.

## REL1.2.2 - 2024-04-10
* `License` property `type` moved to public
* fix bug `License` could not use Creative Commons
* `PUBLIC_DIRECTORY` is now avaiable in modules (global mounted)
* fix bug in builtin module extra_files

## REL1.2.1 - 2024-04-01
* Removed `FEWU_INSIDER_VERSION`
* Changed Info format when skipping
* Update `processTemplate` with `async`

## REL1.2.0 n2.5.0 - 2024-04-01

### Fixed
* Fix bug that Reader could not sort ports correctly.

### Changed
* `text_process.js` now exports a default `TEXT` object.
* `GObject.deleteEscapingChar` is now moved to `text_process` as `TEXT.deleteEscapingCharacters`
* Update CONSTANT.OS_UNAME

### New
* Adjusted function names under `Layout` class
> The old functions are marked as deprecated and will be removed soon

* Adjusted function names in the `text_process.js`

* Update document: GString

* shell script `clean-workspace` and `run-test`
> `clean-workspace` will remove files created by fewu in current dir.
> `run-test` will mkdir fewu-test in $HOME,automatically download theme, create post and generate.

### CLI Parts
* **new** now supports tags, category and title as arguments in command line.

* **help** rewrited

### Beta Changes
> **WARN** that this is undone and do have many bugs !  
**These changes are usually compatible with last minor version, and the old will be removed after about 3 minor versions.**
Rename theme layout option name, and uses `GString` for string calculate.
`cycling` -> `use_split`
`varias` -> `use_foreach`
`option.cycling` -> `option.@split`
`option.varias` -> `option.@foreach`
> NOTE that option.@split and option.@foreach is invalid in JS. Here is used only for convenient.

the `to` uses `GString` format. And **older Template String format is compatible for a while**
> For GString, see document.

## REL1.1.1 n2.4.1 [BUGIFX] - 2024-03-30
* Fix bug which `GString` and `Collection` not imported
* Fix typo bug in built-in module extra-files
* Fix bug which Category and Tag contains `number[][]`

## REL1.1.0 n2.4.0 - 2024-03-30

### Fixed
* wrong comma in result from built-in module `rss`
> pesky ','
* Module Standards v1
> There are some changes in documents

### New
* New License type: Reprint (Experimental)
> **DISABLED** BY DEFAULT BECAUSE IT EXPOSES **DIFFERENT FUNCTIONS**
* The operation new post is now supported auto rename
* ES2023 porting
> Why do we need to write such old codes?

### Changed
* Post path is now calculated by file path, not title.
> It aims to fix some problems with the same title, through it's not very common.
> This might cause some trouble, be careful.
* Plugin now uses ESM
> Need to use '.mjs' extname.
* Custom modules needs to set suffix to '.mjs' for node to import
> Forgot to mention this in REL1.0.0
* Rewrite some codes
> "SOME"

### Removed
* Removed English documents(only Theme kept)
> Who needs those garbage?

### Deprecated
* `Post.path()` is removed. This property will be the same as `Post.paths.<Property>`, which will be renamed.

### PRE-Deprecated
These functions or properties will be removed in 1.2.0
New features will be available in 1.1.x
* `Post<>.old` will be removed. Use `!!Post<>.property?.old` instead.
* `Post<>.ECMA262Date` will be removed. This it not necessary.
* `License.is_cc_license` (renamed: `License.isCreativeCommons`)
* `Post<>.isTopped` (renamed: `Post<>.top`)
* `Post<>.datz` (renamed: `Post<>.fuzzyDate`)

## REL1.0.0 n2.3.2 - 2024-03-28
Release.
**RENAME** Fewu is now the project name!

### Fixed
* Could not load modules when developing fewu.